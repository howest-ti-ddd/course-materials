<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DDD: Relationships vs Integration Patterns (Improved)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; background-color: #f8fafc; }
        .gradient-text { background-image: linear-gradient(to right, #3b82f6, #1d4ed8); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .pattern-card { cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; overflow: hidden; }
        .pattern-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
        .title-underline { position: relative; display: inline-block; }
        .title-underline::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 50px; height: 4px; border-radius: 2px; background-color: #3b82f6; transition: width 0.3s ease; }
        .details { display: grid; grid-template-rows: 0fr; transition: grid-template-rows 0.5s ease-in-out; }
        .details.show { grid-template-rows: 1fr; }
        .details > div { overflow: hidden; }
        .context-map-node { cursor: pointer; transition: all 0.3s ease; }
        .context-map-node .node-shape { transition: all 0.3s ease; }
        .context-map-node:hover .node-shape { transform: scale(1.05); filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.6)); }
        .context-map-node:hover text { font-weight: 800; }
        .context-map-connector { cursor: pointer; transition: all 0.3s ease; }
        .context-map-connector:hover .connector-line { stroke-width: 5; stroke: #f97316; }
        .context-map-connector:hover text { fill: #c2410c; font-weight: 800; }
        .tab-btn { padding: 0.75rem 1.5rem; cursor: pointer; border: none; background-color: transparent; font-weight: 600; color: #4b5563; position: relative; transition: all 0.3s; }
        .tab-btn::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 0; height: 3px; background-color: #2563eb; border-radius: 2px; transition: width 0.3s ease-in-out; }
        .tab-btn.active { color: #1d4ed8; }
        .tab-btn.active::after { width: 80%; }
        #info-modal.hidden { display: none; }
        #info-modal { display: flex; animation: fadeIn 0.3s ease forwards; }
        #info-modal .modal-content { animation: slideUp 0.4s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .badge { font-size: 0.7rem; letter-spacing: 0.02em; }
    </style>
</head>
<body class="text-gray-800 antialiased">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-5">
            <h1 class="text-4xl font-extrabold gradient-text text-center">Navigating Your Domain</h1>
            <p class="text-lg text-gray-600 text-center mt-1">DDD Bounded Contexts ‚Äî <span class="font-semibold">Relationship Types</span> vs <span class="font-semibold">Integration Patterns</span></p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-16">
        <!-- Introduction -->
        <section class="mb-24">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="text-content">
                    <h2 class="text-3xl font-bold mb-4 text-blue-800">The Problem: The "Big Ball of Mud"</h2>
                    <p class="mb-4 text-lg text-gray-700 leading-relaxed">In large software projects, multiple teams work in parallel. Without clear boundaries, their models clash. One team's concept of a <code>Charge</code> might be a customer invoice, while another's is a vendor payment. When combined, the software becomes a buggy, unreliable "Big Ball of Mud."</p>
                    <p class="text-lg font-semibold text-gray-800 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">Domain-Driven Design (DDD) provides strategic tools to prevent this chaos by defining clear model boundaries.</p>
                </div>
                <div class="flex items-center justify-center">
                    <svg width="250" height="250" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-label="abstract tangle">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#d1d5db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6b7280;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path d="M20,50 C20,-50 80,150 80,50 C80,-50 20,150 20,50 Z" stroke="url(#grad1)" stroke-width="2" fill="none" transform="rotate(15 50 50)"/>
                        <path d="M50,20 C150,20 -50,80 50,80 C150,80 -50,20 50,20 Z" stroke="url(#grad1)" stroke-width="2" fill="none" transform="rotate(-15 50 50)"/>
                        <path d="M25,25 C75,25 25,75 75,75" stroke="url(#grad1)" stroke-width="2" fill="none" />
                        <path d="M75,25 C25,25 75,75 25,75" stroke="url(#grad1)" stroke-width="2" fill="none" />
                    </svg>
                </div>
            </div>
        </section>

        <!-- Core Concepts Grid -->
        <section id="core-concepts" class="mb-24">
            <div class="grid md:grid-cols-2 gap-10">
                <!-- Bounded Context -->
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h2 class="text-3xl font-bold text-center mb-6 title-underline">Bounded Context</h2>
                    <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-6 rounded-lg">
                        <p class="text-xl font-semibold">An explicit boundary within which a specific domain model applies and is consistent.</p>
                        <p class="mt-2 text-blue-700">Inside, every term of the <strong>Ubiquitous Language</strong> has a precise, unambiguous meaning.</p>
                    </div>
                    <div class="mt-6 text-center">
                        <button onclick="toggleDetails('symptoms')" class="bg-red-500 text-white font-bold py-2 px-6 rounded-full hover:bg-red-600 transform hover:scale-105 transition-all duration-300 shadow-md">Recognize the Symptoms</button>
                        <div id="symptoms" class="details mt-4 text-left">
                            <div class="pt-4">
                                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                    <h3 class="font-bold text-lg mb-2 text-red-800">When a context is fractured, you'll see:</h3>
                                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                                        <li><strong>Duplicate Concepts:</strong> Two models for the same idea, leading to inconsistencies.</li>
                                        <li><strong>False Cognates:</strong> Same term (<code>Charge</code>), different meanings, leading to bugs and confusion.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Relationship vs Integration -->
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h2 class="text-3xl font-bold text-center mb-6 title-underline">Context Mapping</h2>
                    <div class="bg-green-50 border-l-4 border-green-500 text-green-800 p-6 rounded-lg">
                        <p class="text-xl font-semibold">A map of all Bounded Contexts plus <em>relationship types</em> between teams and the <em>integration patterns</em> used on each side.</p>
                    </div>
                    <div class="mt-6">
                        <h3 class="text-xl font-bold mb-4 text-center text-green-800">Why is it Essential?</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">üó∫Ô∏è</span><div><strong class="font-semibold">It maps the existing terrain:</strong> Shows the project as it <em>is</em>, not as you wish it were.</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">üí¨</span><div><strong class="font-semibold">It clarifies collaboration:</strong> Relationship types (e.g., <em>Partnership, Customer‚ÄìSupplier, Conformist</em>) vs integration patterns (e.g., <em>OHS/PL, ACL</em>).</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">üè¢</span><div><strong class="font-semibold">It reflects org dynamics:</strong> Team boundaries and communication flows are visible on the map.</div></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Relationship Types -->
        <section id="relationship-types" class="mb-24">
            <h2 class="text-3xl font-bold text-center mb-4 title-underline">Relationship Types</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">Use these to label the <strong>link</strong> between upstream/downstream teams. Choose one per link.
            </p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-green-400" onclick="toggleDetails('partnership')">
                    <h4 class="text-xl font-semibold">ü§ù Partnership</h4>
                    <p class="text-gray-600 mt-2">Two teams coordinate closely and succeed/fail together.</p>
                    <div id="partnership" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-green-800">Use When:</strong> Shared goals, frequent syncs. <br><strong>Key:</strong> Two-way planning and continuous integration.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-green-400" onclick="toggleDetails('shared-kernel')">
                    <h4 class="text-xl font-semibold">üíé Shared Kernel</h4>
                    <p class="text-gray-600 mt-2">A tiny shared model segment maintained together.</p>
                    <div id="shared-kernel" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-green-800">Use When:</strong> Coordination cost <em>&lt;</em> duplication cost. <br><strong>Key:</strong> Keep it small; changes require consultation.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-orange-400" onclick="toggleDetails('customer-supplier')">
                    <h4 class="text-xl font-semibold">üõçÔ∏è Customer‚ÄìSupplier</h4>
                    <p class="text-gray-600 mt-2">Downstream‚Äôs needs influence the upstream‚Äôs backlog.</p>
                    <div id="customer-supplier" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-orange-800">Use When:</strong> Upstream is motivated to serve downstream. <br><strong>Key:</strong> Joint acceptance tests; clear SLAs.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-orange-400" onclick="toggleDetails('conformist')">
                    <h4 class="text-xl font-semibold">üôá Conformist</h4>
                    <p class="text-gray-600 mt-2">Downstream adopts the upstream‚Äôs model as-is.</p>
                    <div id="conformist" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-orange-800">Use When:</strong> Upstream won‚Äôt adapt (e.g., vendor) and their model is good enough. <br><strong>Trade-off:</strong> Faster now, tighter coupling later.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-red-400" onclick="toggleDetails('separate-ways')">
                    <h4 class="text-xl font-semibold">üöß Separate Ways</h4>
                    <p class="text-gray-600 mt-2">No integration; contexts evolve independently.</p>
                    <div id="separate-ways" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-red-800">Use When:</strong> Little to no value in integrating. <br><strong>Note:</strong> Avoid for Core subdomains.</div></div>
                </div>
            </div>
        </section>

        <!-- Integration Patterns -->
        <section id="integration-patterns" class="mb-24">
            <h2 class="text-3xl font-bold text-center mb-4 title-underline">Integration Patterns</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-8">Use these to annotate <strong>how</strong> each side integrates. You can mix-and-match with any relationship type.</p>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-orange-400" onclick="toggleDetails('ohs')">
                    <h4 class="text-xl font-semibold">üåê Open Host Service (OHS)</h4>
                    <p class="text-gray-600 mt-2">Upstream exposes a stable protocol (API) for all consumers.</p>
                    <div id="ohs" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-orange-800">Key:</strong> Public contract decoupled from internal model.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-orange-400" onclick="toggleDetails('pl')">
                    <h4 class="text-xl font-semibold">üìú Published Language (PL)</h4>
                    <p class="text-gray-600 mt-2">Explicit message formats (e.g., JSON Schema, Avro).</p>
                    <div id="pl" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-orange-800">Benefit:</strong> Lowers coupling & ambiguity for consumers.</div></div>
                </div>
                <div class="pattern-card bg-white p-6 rounded-lg shadow-md border-t-4 border-orange-400" onclick="toggleDetails('acl')">
                    <h4 class="text-xl font-semibold">üõ°Ô∏è Anticorruption Layer (ACL)</h4>
                    <p class="text-gray-600 mt-2">Downstream translation layer that protects its model.</p>
                    <div id="acl" class="details mt-2 text-sm"><div class="pt-2"><strong class="text-orange-800">Use When:</strong> Integrating with legacy or foreign models; preserve core purity.</div></div>
                </div>
            </div>
            <div class="mt-10 max-w-3xl mx-auto bg-amber-50 border border-amber-200 p-5 rounded-xl">
                <p class="text-amber-900"><strong>Typical combo:</strong> <span class="badge inline-block bg-amber-200 text-amber-900 px-2 py-0.5 rounded">Generic (Upstream)</span> exposes <strong>OHS/PL</strong> ‚Üí <span class="badge inline-block bg-blue-200 text-blue-900 px-2 py-0.5 rounded">Core (Downstream)</span> uses <strong>ACL</strong>. Relationship is <strong>Customer‚ÄìSupplier</strong>.</p>
            </div>
        </section>

        <!-- Interactive Use Cases -->
        <section id="interactive-use-cases" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-4 title-underline">Context Map in Action</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-6">Click the diagrams. Badges show <span class="badge bg-emerald-100 text-emerald-900 px-2 py-0.5 rounded">Relationship</span> vs <span class="badge bg-orange-100 text-orange-900 px-2 py-0.5 rounded">Integration</span>.</p>

            <div class="bg-white p-4 md:p-8 rounded-2xl shadow-2xl border border-gray-200">
                <!-- Tab Buttons -->
                <div class="flex flex-wrap justify-center border-b border-gray-200 mb-6">
                    <button id="btn-uc1" class="tab-btn active" onclick="switchTab('uc1')">Shared Kernel</button>
                    <button id="btn-uc2" class="tab-btn" onclick="switchTab('uc2')">Cust‚ÄìSupp + OHS/PL ‚Üí ACL</button>
                    <button id="btn-uc3" class="tab-btn" onclick="switchTab('uc3')">Conformist</button>
                    <button id="btn-uc4" class="tab-btn" onclick="switchTab('uc4')">ACL to Legacy</button>
                </div>

                <!-- UC1: Shared Kernel -->
                <div id="uc1" class="tab-content">
                    <p class="text-center text-gray-600 mb-4 px-4"><b>Scenario:</b> A <code>Catalog</code> team and an <code>Orders</code> team share a tiny core <code>Product</code> model. Duplication would be too costly.</p>
                    <svg viewBox="0 0 400 200" class="w-full h-auto max-w-lg mx-auto">
                        <g class="context-map-node" onclick="showInfo('uc1-catalog')">
                            <ellipse class="node-shape" cx="125" cy="100" rx="80" ry="60" fill="#e0f2fe" stroke="#3b82f6" stroke-width="2.5" />
                            <text x="100" y="105" font-weight="bold">Catalog</text>
                        </g>
                        <g class="context-map-node" onclick="showInfo('uc1-orders')">
                            <ellipse class="node-shape" cx="275" cy="100" rx="80" ry="60" fill="#dcfce7" stroke="#22c55e" stroke-width="2.5" />
                            <text x="255" y="105" font-weight="bold">Orders</text>
                        </g>
                        <g class="context-map-connector" onclick="showInfo('uc1-kernel')">
                            <path d="M 195 65 A 60 60 0 0 1 195 135" fill="#fef9c3" stroke="#f59e0b" stroke-width="2.5" opacity="0.8"/>
                            <text x="170" y="94" font-weight="bold" font-size="12" fill="#713f12">Shared</text>
                            <text x="172" y="110" font-weight="bold" font-size="12" fill="#713f12">Kernel</text>
                            <rect x="165" y="120" width="70" height="18" rx="9" fill="#d1fae5" stroke="#34d399" />
                            <text x="171" y="132" font-size="10" fill="#065f46">Relationship</text>
                        </g>
                    </svg>
                </div>

                <!-- UC2: Customer‚ÄìSupplier with OHS/PL (up) and ACL (down) -->
                <div id="uc2" class="tab-content hidden">
                    <p class="text-center text-gray-600 mb-4 px-4"><b>Scenario:</b> <code>Identity & Access</code> (Generic, Upstream) serves <code>Marketing</code> (Core, Downstream). Relationship is <b>Customer‚ÄìSupplier</b>. Integration is <b>OHS/PL</b> upstream and <b>ACL</b> downstream.</p>
                    <svg viewBox="0 0 460 300" class="w-full h-auto max-w-xl mx-auto">
                        <defs>
                            <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#f97316"/></marker>
                        </defs>
                        <g class="context-map-node" onclick="showInfo('uc2-identity')">
                            <rect x="155" y="30" width="150" height="80" rx="15" class="node-shape" fill="#fefce8" stroke="#f59e0b" stroke-width="2.5" />
                            <text x="165" y="65" font-weight="bold">Identity &amp; Access</text>
                            <text x="190" y="83" font-size="11" fill="#92400e">(Upstream ¬∑ Generic)</text>
                            <!-- OHS/PL badge -->
                            <g onclick="event.stopPropagation(); showInfo('uc2-ohs')">
                                <rect x="188" y="95" width="85" height="22" rx="11" fill="#fff7ed" stroke="#fb923c" stroke-width="2" />
                                <text x="197" y="110" font-size="10" font-weight="bold">OHS / PL</text>
                            </g>
                        </g>
                        <g class="context-map-node" onclick="showInfo('uc2-marketing')">
                            <rect x="155" y="190" width="150" height="80" rx="15" class="node-shape" fill="#e0f2fe" stroke="#3b82f6" stroke-width="2.5" />
                            <text x="195" y="225" font-weight="bold">Marketing</text>
                            <text x="182" y="243" font-size="11" fill="#0c4a6e">(Downstream ¬∑ Core)</text>
                        </g>
                        <g class="context-map-connector" onclick="showInfo('uc2-relationship')">
                            <line class="connector-line" x1="230" y1="110" x2="230" y2="190" stroke="#fb923c" stroke-width="3" marker-end="url(#arrow)"/>
                            <rect x="242" y="140" width="110" height="20" rx="10" fill="#ecfdf5" stroke="#34d399" />
                            <text x="247" y="154" font-size="11" font-weight="bold" fill="#065f46">Customer‚ÄìSupplier</text>
                        </g>
                        <!-- ACL badge near downstream edge -->
                        <g class="context-map-connector" onclick="showInfo('uc2-acl')">
                            <rect x="105" y="150" width="52" height="20" rx="10" fill="#fffbeb" stroke="#f59e0b" />
                            <text x="116" y="164" font-size="10" font-weight="bold" fill="#7c2d12">ACL</text>
                        </g>
                    </svg>
                </div>

                <!-- UC3: Conformist to a vendor upstream -->
                <div id="uc3" class="tab-content hidden">
                    <p class="text-center text-gray-600 mb-4 px-4"><b>Scenario:</b> A <code>Billing</code> context integrates with a vendor <code>Payments Gateway</code>. The vendor won‚Äôt adapt, so Billing <b>Conforms</b> to their model (no ACL).</p>
                    <svg viewBox="0 0 460 300" class="w-full h-auto max-w-xl mx-auto">
                        <defs>
                            <marker id="arrow2" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#f97316"/></marker>
                        </defs>
                        <g class="context-map-node" onclick="showInfo('uc3-vendor')">
                            <rect x="155" y="30" width="150" height="80" rx="15" class="node-shape" fill="#fefce8" stroke="#f59e0b" stroke-width="2.5" />
                            <text x="168" y="65" font-weight="bold">Payments Gateway</text>
                            <text x="205" y="83" font-size="11" fill="#92400e">(Upstream ¬∑ Vendor)</text>
                            <g onclick="event.stopPropagation(); showInfo('uc3-ohs')">
                                <rect x="195" y="95" width="70" height="22" rx="11" fill="#fff7ed" stroke="#fb923c" stroke-width="2" />
                                <text x="205" y="110" font-size="10" font-weight="bold">OHS/PL</text>
                            </g>
                        </g>
                        <g class="context-map-node" onclick="showInfo('uc3-billing')">
                            <rect x="155" y="190" width="150" height="80" rx="15" class="node-shape" fill="#e0f2fe" stroke="#3b82f6" stroke-width="2.5" />
                            <text x="210" y="230" font-weight="bold">Billing</text>
                        </g>
                        <g class="context-map-connector" onclick="showInfo('uc3-conformist')">
                            <line class="connector-line" x1="230" y1="110" x2="230" y2="190" stroke="#fb923c" stroke-width="3" marker-end="url(#arrow2)"/>
                            <rect x="240" y="140" width="86" height="20" rx="10" fill="#ecfdf5" stroke="#34d399" />
                            <text x="245" y="154" font-size="11" font-weight="bold" fill="#065f46">Conformist</text>
                        </g>
                    </svg>
                </div>

                <!-- UC4: ACL to Legacy -->
                <div id="uc4" class="tab-content hidden">
                    <p class="text-center text-gray-600 mb-4 px-4"><b>Scenario:</b> A new <code>Shipping</code> app must integrate with a messy <code>Legacy Tracking</code> system without being corrupted by its design.</p>
                    <svg viewBox="0 0 470 250" class="w-full h-auto max-w-xl mx-auto">
                        <defs>
                            <marker id="arrow3" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#f97316"/></marker>
                        </defs>
                        <g class="context-map-node" onclick="showInfo('uc4-shipping')">
                            <rect x="20" y="85" width="150" height="80" rx="15" class="node-shape" fill="#dcfce7" stroke="#22c55e" stroke-width="2.5" />
                            <text x="50" y="125" font-weight="bold">New Shipping</text>
                        </g>
                        <g class="context-map-node" onclick="showInfo('uc4-legacy')">
                            <rect x="300" y="85" width="150" height="80" rx="15" class="node-shape" fill="#fee2e2" stroke="#ef4444" stroke-width="2.5" />
                            <text x="325" y="125" font-weight="bold">Legacy System</text>
                        </g>
                        <g class="context-map-connector" onclick="showInfo('uc4-acl')">
                            <line class="connector-line" x1="170" y1="125" x2="210" y2="125" stroke="#fb923c" stroke-width="3"/>
                            <path d="M 210 95 L 240 80 L 240 170 L 210 155 Z" fill="#fff" stroke="#fb923c" stroke-width="3" />
                            <text x="215" y="128" font-size="12" font-weight="bold" fill="#c2410c">ACL</text>
                            <line class="connector-line" x1="240" y1="125" x2="300" y2="125" stroke="#fb923c" stroke-width="3" marker-end="url(#arrow3)"/>
                            <rect x="180" y="140" width="95" height="20" rx="10" fill="#ecfdf5" stroke="#34d399" />
                            <text x="186" y="154" font-size="11" font-weight="bold" fill="#065f46">Integration</text>
                        </g>
                    </svg>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal -->
    <div id="info-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div class="modal-content bg-white rounded-lg shadow-xl max-w-lg w-full p-6 relative">
            <button onclick="hideInfo()" class="absolute top-3 right-4 text-gray-400 hover:text-gray-800 text-3xl leading-none font-semibold" aria-label="Close">&times;</button>
            <h4 id="modal-title" class="font-bold text-xl text-blue-800 mb-3"></h4>
            <p id="modal-text" class="text-gray-700 leading-relaxed"></p>
        </div>
    </div>

    <script>
        function toggleDetails(id) {
            const currentlyOpen = document.querySelector('.details.show');
            const element = document.getElementById(id);
            if (currentlyOpen && currentlyOpen.id !== id) currentlyOpen.classList.remove('show');
            element.classList.toggle('show');
        }

        const infoModal = document.getElementById('info-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');

        const infoData = {
            // UC1
            'uc1-catalog': { title: 'Context: Catalog', text: 'Manages product information, pricing, and categories. Often core or supporting depending on the business.' },
            'uc1-orders': { title: 'Context: Orders', text: 'Handles customer orders, carts, and checkout. Needs accurate product info from Catalog.' },
            'uc1-kernel': { title: 'Relationship: Shared Kernel', text: 'Teams collaborate on a tiny shared Product model. Avoids duplication, but requires tight coordination. Keep it small.' },

            // UC2
            'uc2-identity': { title: 'Context: Identity & Access (Upstream ¬∑ Generic)', text: 'Centralized generic service for users/permissions. Acts as upstream supplier.' },
            'uc2-marketing': { title: 'Context: Marketing (Downstream ¬∑ Core)', text: 'Consumes identity data for campaigns. Acts as downstream customer.' },
            'uc2-ohs': { title: 'Integration (Upstream): OHS/PL', text: 'Upstream provides an Open Host Service with a Published Language‚Äîstable, well-documented API decoupled from internal model.' },
            'uc2-acl': { title: 'Integration (Downstream): ACL', text: 'Downstream uses an Anticorruption Layer to translate into its own model and protect core concepts.' },
            'uc2-relationship': { title: 'Relationship: Customer‚ÄìSupplier', text: 'Downstream needs influence upstream planning and SLAs. Joint tests ensure stability.' },

            // UC3
            'uc3-vendor': { title: 'Context: Payments Gateway (Upstream ¬∑ Vendor)', text: 'External provider with stable API but little willingness to adapt.' },
            'uc3-billing': { title: 'Context: Billing (Downstream)', text: 'To save time, Billing adopts the vendor‚Äôs model as-is.' },
            'uc3-ohs': { title: 'Integration (Upstream): OHS/PL', text: 'Vendor exposes a public API and message formats.' },
            'uc3-conformist': { title: 'Relationship: Conformist', text: 'Downstream conforms to the upstream‚Äôs model; minimal translation. Faster, but higher coupling.' },

            // UC4
            'uc4-shipping': { title: 'Context: New Shipping App', text: 'Modern domain model for managing shipments.' },
            'uc4-legacy': { title: 'Context: Legacy Tracking System', text: 'Difficult-to-change system with a mismatched model.' },
            'uc4-acl': { title: 'Integration: Anticorruption Layer (ACL)', text: 'Translator at the boundary prevents the legacy model from leaking into the new design.' }
        };

        function showInfo(id) {
            const data = infoData[id];
            if (data) {
                modalTitle.textContent = data.title;
                modalText.textContent = data.text;
                infoModal.classList.remove('hidden');
            }
        }
        function hideInfo() { infoModal.classList.add('hidden'); }
        infoModal.addEventListener('click', (e) => { if (e.target === infoModal) hideInfo(); });

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach((tab) => tab.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach((btn) => btn.classList.remove('active'));
            document.getElementById(tabId).classList.remove('hidden');
            document.getElementById('btn-' + tabId).classList.add('active');
        }
    </script>
</body>
</html>
