<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDD & Architectural Styles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Hide cursor everywhere when active (overrides element-specific cursors) */
        .hide-cursor,
        .hide-cursor * {
            cursor: none !important;
        }
    </style>
</head>
<body>
    <div id="slide-container"></div>
    
    <!-- Navigation -->
    <button id="prevBtn" class="nav-button">← Prev</button>
    <button id="nextBtn" class="nav-button">Next →</button>
    <div id="slideCounter"></div>

    <!-- Theme Toggle (top-right) -->
    <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle theme">
        <!-- Sun icon (shown in dark mode) -->
        <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 15a5 5 0 100-10 5 5 0 000 10z" />
            <path fill-rule="evenodd" d="M10 1a1 1 0 011 1v1a1 1 0 11-2 0V2a1 1 0 011-1zm0 14a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm9-5a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM4 10a1 1 0 01-1 1H2a1 1 0 110-2h1a1 1 0 011 1zm11.657-6.657a1 1 0 010 1.414L15.414 6a1 1 0 11-1.414-1.414l.243-.243a1 1 0 011.414 0zM6 15.414a1 1 0 001.414 0l.243-.243A1 1 0 106.243 13.757l-.243.243A1 1 0 006 15.414zM15.414 14a1 1 0 011.414 0l.243.243A1 1 0 1115.657 15.9L15.414 15.657A1 1 0 0115.414 14zM4.586 6A1 1 0 003.172 4.586l.243-.243A1 1 0 114.829 5.757L4.586 6z" clip-rule="evenodd" />
        </svg>
        <!-- Moon icon (shown in light mode) -->
        <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-slate-700 hidden" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 116.707 2.707a8.001 8.001 0 1010.586 10.586z" />
        </svg>
        <span id="theme-label" class="text-sm">Light</span>
    </button>

    <script src="navigation.js"></script>
    <script src="remote-control.js"></script>
    <script>
        // Theme toggle + persistence
        (function() {
            const btn = document.getElementById('theme-toggle');
            const label = document.getElementById('theme-label');
            const sun = document.getElementById('icon-sun');
            const moon = document.getElementById('icon-moon');

            function applyTheme(theme) {
                if (theme === 'light') {
                    document.body.classList.add('theme-light');
                    sun.classList.add('hidden');
                    moon.classList.remove('hidden');
                    label.textContent = 'Dark';
                } else {
                    document.body.classList.remove('theme-light');
                    sun.classList.remove('hidden');
                    moon.classList.add('hidden');
                    label.textContent = 'Light';
                }
                try { localStorage.setItem('slides-theme', theme); } catch (e) {}
            }

            const saved = (function() { try { return localStorage.getItem('slides-theme'); } catch(e) { return null; } })() || 'dark';
            applyTheme(saved);

            btn.addEventListener('click', () => {
                const next = document.body.classList.contains('theme-light') ? 'dark' : 'light';
                applyTheme(next);
            });
        })();
    </script>
    <script>
        // Auto-hide mouse cursor in fullscreen (DOM or F11) after short inactivity
        (function () {
            const body = document.body;
            const HIDE_DELAY_MS = 2000; // short interval before hiding
            let hideTimer = null;
            let listenersAttached = false;

            function hasDomFullscreen() {
                return !!(document.fullscreenElement ||
                          document.webkitFullscreenElement ||
                          document.mozFullScreenElement ||
                          document.msFullscreenElement);
            }

            function isBrowserFullscreen() {
                // Heuristic for F11-style fullscreen where DOM fullscreen API is not used
                const w = window.innerWidth;
                const h = window.innerHeight;
                const sw = window.screen.width;
                const sh = window.screen.height;
                const saw = window.screen.availWidth || sw;
                const sah = window.screen.availHeight || sh;
                // Tolerate a small discrepancy for OS/toolbars and devicePixelRatio rounding
                const delta = 5;
                const widthFullscreen = (Math.abs(w - sw) <= delta) || (Math.abs(w - saw) <= delta);
                const heightFullscreen = (Math.abs(h - sh) <= delta) || (Math.abs(h - sah) <= delta);
                return widthFullscreen && heightFullscreen;
            }

            function isFullscreenActive() {
                return hasDomFullscreen() || isBrowserFullscreen();
            }

            function hideCursor() {
                if (isFullscreenActive()) {
                    body.classList.add('hide-cursor');
                }
            }

            function showCursor() {
                body.classList.remove('hide-cursor');
            }

            function scheduleHide() {
                clearTimeout(hideTimer);
                hideTimer = setTimeout(hideCursor, HIDE_DELAY_MS);
            }

            function onUserActivity() {
                // Any user activity in fullscreen shows cursor briefly, then hides again
                if (!isFullscreenActive()) return;
                showCursor();
                scheduleHide();
            }

            function attachActivityListeners() {
                if (listenersAttached) return;
                listenersAttached = true;
                window.addEventListener('mousemove', onUserActivity);
                window.addEventListener('mousedown', onUserActivity);
                window.addEventListener('keydown', onUserActivity);
                window.addEventListener('touchstart', onUserActivity, { passive: true });
                window.addEventListener('pointermove', onUserActivity);
            }

            function detachActivityListeners() {
                if (!listenersAttached) return;
                listenersAttached = false;
                window.removeEventListener('mousemove', onUserActivity);
                window.removeEventListener('mousedown', onUserActivity);
                window.removeEventListener('keydown', onUserActivity);
                window.removeEventListener('touchstart', onUserActivity);
                window.removeEventListener('pointermove', onUserActivity);
            }

            function onFullscreenMaybeChange() {
                clearTimeout(hideTimer);
                if (isFullscreenActive()) {
                    // Entered fullscreen: show cursor, then auto-hide after delay
                    showCursor();
                    attachActivityListeners();
                    scheduleHide();
                } else {
                    // Exited fullscreen: ensure cursor visible and cleanup
                    showCursor();
                    detachActivityListeners();
                }
            }

            // DOM fullscreen events (cross-browser)
            document.addEventListener('fullscreenchange', onFullscreenMaybeChange);
            document.addEventListener('webkitfullscreenchange', onFullscreenMaybeChange);
            document.addEventListener('mozfullscreenchange', onFullscreenMaybeChange);
            document.addEventListener('MSFullscreenChange', onFullscreenMaybeChange);

            // F11 fullscreen detection via resize
            window.addEventListener('resize', onFullscreenMaybeChange);

            // Initialize state
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', onFullscreenMaybeChange);
            } else {
                onFullscreenMaybeChange();
            }
        })();
    </script>
</body>
</html>
